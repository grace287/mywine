{% load static %}

{% block extra_head %}
<!-- Font AwesomeÍ≥º SweetAlert2 Ï∂îÍ∞Ä -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<!-- <link rel="stylesheet" href="{% static 'css/create_note.css' %}"> -->
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<!-- Select2 CSS, JS Ï∂îÍ∞Ä -->
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<link href="https://cdn.jsdelivr.net/npm/nouislider@14.6.3/distribute/nouislider.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/nouislider@14.6.3/distribute/nouislider.min.js"></script>

<link rel="stylesheet" href="{% static 'css/create_note.css' %}?v=1.1">
<script src="{% static 'js/create_note.js' %}?v=1.1"></script>
<script src="{% static 'js/note_detail_modal.js' %}?v=1.1"></script>
<script src="{% static 'js/calendar.js' %}?v=1.1"></script>
{% endblock %}

{% block content %}

<div class="note-form-container">
    <div class="tastingNoteForm" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.non_field_errors }}
        <div>
            <h2 class="banner">ÏãúÏùåÎÖ∏Ìä∏ ÏÉÅÏÑ∏Î≥¥Í∏∞</h2>
        </div>
        <div class="steps">
            <div class="step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label">Í∏∞Î≥∏ Ï†ïÎ≥¥</div>
            </div>
            <div class="step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label">Ïô∏Í¥Ä ÌèâÍ∞Ä</div>
            </div>
            <div class="step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label">ÏïÑÎ°úÎßà</div>
            </div>
            <div class="step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-label">Îßõ</div>
            </div>
            <div class="step" data-step="5">
                <div class="step-number">5</div>
                <div class="step-label">Ï¢ÖÌï©ÌèâÍ∞Ä</div>
            </div>
        </div>

        <p id="wine_name">{{ note.wine_name }}</p>

        <div class="form-group">
            <label for="wine_name">ÏôÄÏù∏ Ïù¥Î¶Ñ *</label>
            {% if is_detail %}
                <p id="wine_name">{{ note.wine_name }}</p>
            {% else %}
                <input type="text" id="wine_name" name="wine_name" value="{{ note.wine_name|default:'' }}" required>
            {% endif %}
        </div>
    
            <form id="tastingNoteForm" method="post" action="{% if not is_detail %}{% url 'notes:note_create' %}{% endif %}"></form>
            {% csrf_token %}

            
            <!-- Ïä§ÌÖù 1: Í∏∞Î≥∏ Ï†ïÎ≥¥ -->
            <div class="step-content active" id="step1">
                <section class="form-section">
                    <div class="grid-form">
                        <h2>Í∏∞Î≥∏ ÏôÄÏù∏ Ï†ïÎ≥¥</h2>
                        <div class="grid-form-sub">
                            <div class="form-group">
                                <label for="wine_name">ÏôÄÏù∏ Ïù¥Î¶Ñ *</label>
                                {% if is_detail %}
                                    <p id="wine_name">{{ note.wine_name }}</p>
                                {% else %}
                                    <input type="text" id="wine_name" name="wine_name" value="{{ note.wine_name|default:'' }}" required>
                                {% endif %}
                            </div>
                            <label for="wine_type">ÏôÄÏù∏ Ï¢ÖÎ•ò</label>
                            {% if is_detail %}
                                <p id="wine_type">{{ note.wine_type }}</p>
                            {% else %}
                                <input type="radio" id="wine_type" name="wine_type" value="{{ note.wine_type|default:'' } checked}" required>
                            {% endif %}

                            <div class="form-group">
                                {% if is_detail %}
                                    <p id="vintage">{{ note.vintage }}</p>
                                {% else %}
                                    <label for="vintage">ÎπàÌã∞ÏßÄ</label>
                                    <input type="number" id="vintage" name="vintage" min="1900" max="2030" placeholder="ÎπàÌã∞ÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                                {% endif %}
                            </div>

                            <div class="form-group">
                                {% if is_detail %}
                                    <p id="country">{{ note.country }}</p>
                                {% else %}
                                    <label for="country">ÏÉùÏÇ∞Íµ≠</label>
                                    <input type="text" id="country" name="country" value="{{ note.country|default:'' }}" required>
                                {% endif %}
                            </div>
                            
                            <div class="form-group">
                                {% if is_detail %}
                                    <p id="winery">{{ note.winery }}</p>
                                {% else %}
                                    <label for="winery">ÏôÄÏù¥ÎÑàÎ¶¨</label>
                                    <input type="text" id="winery" name="winery">
                                {% endif %}
                            </div>

                            <div class="form-group">
                                {% if is_detail %}
                                    <p id="grape_varieties">{{ note.grape_varieties }}</p>
                                {% else %}
                                    <label for="grape_varieties">Ìè¨ÎèÑ ÌíàÏ¢Ö</label>
                                    <input type="text" id="grape_varieties" name="grape_varieties">
                                {% endif %}
                            </div>
                

                        </div>
                    </div>
                </section>
        
                <!-- ÌÖåÏù¥Ïä§ÌåÖ Ï†ïÎ≥¥ ÏÑπÏÖò -->
                <section class="form-section">
                    <div class="grid-form">
                        <h2>ÌÖåÏù¥Ïä§ÌåÖ Ï†ïÎ≥¥</h2>
                    <div class="grid-form-sub">
                        <div class="form-group">
                            <label for="tasting_date">ÌÖåÏù¥Ïä§ÌåÖ ÎÇ†Ïßú *</label>
                            <input type="date" id="tasting_date" name="tasting_date" required>
                        </div>
        
                        <div class="form-group">
                            <label for="tasting_place">ÌÖåÏù¥Ïä§ÌåÖ Ïû•ÏÜå</label>
                            <input type="text" id="tasting_place" name="tasting_place">
                        </div>
                        <div class="form-group">
                            <label for="tasting_with">Ìï®ÍªòÌïú ÏÇ¨Îûå</label>
                            <input type="text" id="tasting_with" name="tasting_with">
                        </div>
                        <div class="form-group">
                            <label for="price">Í∞ÄÍ≤©</label>
                            <input type="number" id="price" name="price">
                        </div>
                        <div class="form-group">
                            <label for="price_place">Íµ¨ÏûÖÏ≤ò</label>
                            <input type="text" id="price_place" name="price_place">
                        </div>
                    </div>
                </section>
            </div>
    
            <!-- Ïä§ÌÖù 2: Ïô∏Í¥Ä -->
            <div class="step-content" id="step2">
                <section class="form-section">
                    <h2>Ïô∏Í¥Ä ÌèâÍ∞Ä</h2>
                    <div class="appearance-grid">
                        <!-- ÏÉâÏùò Í∞ïÎèÑ Ïä¨ÎùºÏù¥Îçî -->
                        <div class="slider-group">
                            <label for="appearance_intensity">ÏÉâÏùò Í∞ïÎèÑ</label>
                            <div id="intensity-slider" class="slider"></div>
                            <input type="hidden" name="appearance_intensity" id="appearance_intensity">
                            <div class="slider-labels">
                                <span>Îß§Ïö∞ Ïó∞Ìï®</span>
                                <span>Ïó∞Ìï®</span>
                                <span>Î≥¥ÌÜµ</span>
                                <span>ÏßÑÌï®</span>
                                <span>Îß§Ïö∞ ÏßÑÌï®</span>
                            </div>
                        </div>

                        <!-- Ìà¨Î™ÖÎèÑ Ïä¨ÎùºÏù¥Îçî -->
                        <div class="slider-group">
                            <label for="appearance_clarity">Ìà¨Î™ÖÎèÑ</label>
                            <div id="clarity-slider" class="slider"></div>
                            <input type="hidden" name="appearance_clarity" id="appearance_clarity">
                            <div class="slider-labels">
                                <span>ÌÉÅÌï®</span>
                                <span>ÌùêÎ¶º</span>
                                <span>ÎßëÏùå</span>
                            </div>
                        </div>
        
                        <div class="color-selection">
                            <label>ÏôÄÏù∏ ÏÉâÏÉÅ (Îã§Ï§ë ÏÑ†ÌÉù Í∞ÄÎä•)</label>
                            <div class="wine-colors-grid">
                <!-- Î†àÎìú ÏôÄÏù∏ ÏÉâÏÉÅ -->
                <div class="color-category">
                    <h4>Î†àÎìú ÏôÄÏù∏</h4>
                    <div class="color-options">
                        <div class="color-option">
                            <input type="checkbox" id="color_purple" name="appearance_color" value="purple">
                            <label for="color_purple" style="background-color: #4a0080;" title="Purple"></label>
                        </div>
                        <div class="color-option">
                            <input type="checkbox" id="color_ruby" name="appearance_color" value="ruby">
                            <label for="color_ruby" style="background-color: #9b111e;" title="Ruby"></label>
                        </div>
                        <div class="color-option">
                            <input type="checkbox" id="color_garnet" name="appearance_color" value="garnet">
                            <label for="color_garnet" style="background-color: #733635;" title="Garnet"></label>
                        </div>
                        <div class="color-option">
                            <input type="checkbox" id="color_tawny" name="appearance_color" value="tawny">
                            <label for="color_tawny" style="background-color: #8b4513;" title="Tawny"></label>
                        </div>
                        <div class="color-option">
                            <input type="checkbox" id="color_brown" name="appearance_color" value="brown">
                            <label for="color_brown" style="background-color: #654321;" title="Brown"></label>
                        </div>
                        <div class="color-option">
                            <input type="checkbox" id="color_deep_red" name="appearance_color" value="deep_red">
                            <label for="color_deep_red" style="background-color: #800000;" title="Deep Red"></label>
                        </div>
                    </div>
                </div>

                <!-- ÌôîÏù¥Ìä∏ ÏôÄÏù∏ ÏÉâÏÉÅ -->
                <div class="color-category">
                    <h4>ÌôîÏù¥Ìä∏ ÏôÄÏù∏</h4>
                    <div class="color-options">
                        <div class="color-option">
                            <input type="checkbox" id="color_lemon" name="appearance_color" value="lemon">
                            <label for="color_lemon" style="background-color: #fff44f;" title="Lemon"></label>
                        </div>
                        <div class="color-option">
                            <input type="checkbox" id="color_gold" name="appearance_color" value="gold">
                            <label for="color_gold" style="background-color: #ffd700;" title="Gold"></label>
                        </div>
                        <div class="color-option">
                            <input type="checkbox" id="color_green" name="appearance_color" value="green">
                            <label for="color_green" style="background-color: #98fb98;" title="Green"></label>
                        </div>
                        <div class="color-option">
                            <input type="checkbox" id="color_yellow" name="appearance_color" value="yellow">
                            <label for="color_yellow" style="background-color: #ffeb3b;" title="Yellow"></label>
                        </div>
                    </div>
                </div>

                <!-- Î°úÏ†ú ÏôÄÏù∏ ÏÉâÏÉÅ -->
                <div class="color-category">
                    <h4>Î°úÏ†ú ÏôÄÏù∏</h4>
                    <div class="color-options">
                        <div class="color-option">
                            <input type="checkbox" id="color_pink" name="appearance_color" value="pink">
                            <label for="color_pink" style="background-color: #ffb6c1;" title="Pink"></label>
                        </div>
                        <div class="color-option">
                            <input type="checkbox" id="color_apricot" name="appearance_color" value="apricot">
                            <label for="color_apricot" style="background-color: #ffb347;" title="Apricot"></label>
                        </div>
                        <div class="color-option">
                            <input type="checkbox" id="color_strawberry" name="appearance_color" value="strawberry">
                            <label for="color_strawberry" style="background-color: #fc5a8d;" title="Strawberry"></label>
                        </div>
                        <div class="color-option">
                            <input type="checkbox" id="color_coral" name="appearance_color" value="coral">
                            <label for="color_coral" style="background-color: #ff7f50;" title="Coral"></label>
                        </div>
                    </div>
                        </div>
                    </div>
                </section>
            </div>
    
            <!-- Ïä§ÌÖù 3: ÏïÑÎ°úÎßà -->
            <div class="step-content" id="step3">
                <section class="form-section">
                    <h2>ÏïÑÎ°úÎßà</h2>
                    <!-- ÏïÑÎ°úÎßà Í∞ïÎèÑ Ïä¨ÎùºÏù¥Îçî -->
                    <div class="slider-group aroma-intensity">
                        <label>ÏïÑÎ°úÎßà Í∞ïÎèÑ</label>
                        <div id="aroma-intensity-slider" class="slider"></div>
                        <input type="hidden" name="aroma_intensity" id="aroma_intensity" value="3">
                        <div class="slider-labels">
                            <span>Îß§Ïö∞ ÏïΩÌï®</span>
                            <span>ÏïΩÌï®</span>
                            <span>Î≥¥ÌÜµ</span>
                            <span>Í∞ïÌï®</span>
                            <span>Îß§Ïö∞ Í∞ïÌï®</span>
                        </div>
                    </div>

                    <!-- ÏïÑÎ°úÎßà ÏÑ†ÌÉù -->
                    <div class="aroma-categories">
                        <!-- Í≥ºÏùºÌñ• -->
                        <div class="aroma-category">
                            <h3>üçé Í≥ºÏùºÌñ•</h3>
                            <div class="aroma-grid">
                                <div class="aroma-item" data-category="fruit">
                                    <input type="checkbox" id="aroma_apple" name="aroma_notes" value="apple">
                                    <label for="aroma_apple">
                                        <span class="aroma-icon">üçé</span>
                                        <span class="aroma-name">ÏÇ¨Í≥º</span>
                                    </label>
                                </div>
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_pear" name="aroma_notes" value="pear">
                                    <label for="aroma_pear">
                                        <span class="aroma-icon">üçê</span>
                                        <span class="aroma-name">Î∞∞</span>
                                    </label>
                                </div>
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_peach" name="aroma_notes" value="peach">
                                    <label for="aroma_peach">
                                        <span class="aroma-icon">üçë</span>
                                        <span class="aroma-name">Î≥µÏà≠ÏïÑ</span>
                                    </label>
                                </div>
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_plum" name="aroma_notes" value="plum">
                                    <label for="aroma_plum">
                                        <span class="aroma-icon">üçá</span>
                                        <span class="aroma-name">ÏûêÎëê</span>
                                    </label>
                                </div>
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_cherry" name="aroma_notes" value="cherry">
                                    <label for="aroma_cherry">
                                        <span class="aroma-icon">üçí</span>
                                        <span class="aroma-name">Ï≤¥Î¶¨</span>
                                    </label>
                                </div>
                                <!-- Ïó¥ÎåÄÍ≥ºÏùº -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_tropical_fruit" name="aroma_notes" value="tropical_fruit">
                                    <label for="aroma_tropical_fruit">
                                        <span class="aroma-icon">üçç</span>
                                        <span class="aroma-name">Ïó¥ÎåÄÍ≥ºÏùº</span>
                                    </label>
                                </div>
                                <!-- Î∏îÎûôÎ≤†Î¶¨ -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_blackberry" name="aroma_notes" value="blackberry">
                                    <label for="aroma_blackberry">
                                        <span class="aroma-icon">üçá</span>
                                        <span class="aroma-name">Î∏îÎûôÎ≤†Î¶¨</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Ìñ•Ïã†Î£å -->
                        <div class="aroma-category">
                            <h3>üåø Ìñ•Ïã†Î£å</h3>
                            <div class="aroma-grid">
                                <div class="aroma-item" data-category="spice">
                                    <input type="checkbox" id="aroma_vanilla" name="aroma_notes" value="vanilla">
                                    <label for="aroma_vanilla">
                                        <span class="aroma-icon">üç∂</span>
                                        <span class="aroma-name">Î∞îÎãêÎùº</span>
                                    </label>
                                </div>
                                <!-- ÏãúÎÇòÎ™¨ -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_cinnamon" name="aroma_notes" value="cinnamon">
                                    <label for="aroma_cinnamon">
                                        <span class="aroma-icon">üç∂</span>
                                        <span class="aroma-name">ÏãúÎÇòÎ™¨</span>
                                    </label>
                                </div>
                                <!-- ÌõÑÏ∂î -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_pepper" name="aroma_notes" value="pepper">
                                    <label for="aroma_pepper">
                                        <span class="aroma-icon">üç∂</span>
                                        <span class="aroma-name">ÌõÑÏ∂î</span>
                                    </label>
                                </div>
                                <!-- ÏÉùÍ∞ï -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_ginger" name="aroma_notes" value="ginger">
                                    <label for="aroma_ginger">
                                        <span class="aroma-icon">üç∂</span>
                                        <span class="aroma-name">ÏÉùÍ∞ï</span>
                                    </label>
                                </div>
                                <!-- ÏÉ§ÌîÑÎûÄ -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_saffron" name="aroma_notes" value="saffron">
                                    <label for="aroma_saffron">
                                        <span class="aroma-icon">üç∂</span>
                                        <span class="aroma-name">ÏÉ§ÌîÑÎûÄ</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- ÍΩÉÌñ• -->
                        <div class="aroma-category">
                            <h3>üå∏ ÌîåÎ°úÎü¥</h3>
                            <div class="aroma-grid">
                                <div class="aroma-item" data-category="floral">
                                    <input type="checkbox" id="aroma_rose" name="aroma_notes" value="rose">
                                    <label for="aroma_rose">
                                        <span class="aroma-icon">üåπ</span>
                                        <span class="aroma-name">Ïû•ÎØ∏</span>
                                    </label>
                                </div>
                                <!-- ÎùºÏùºÎùΩ -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_lilac" name="aroma_notes" value="lilac">
                                    <label for="aroma_lilac">
                                        <span class="aroma-icon">üå∏</span>
                                        <span class="aroma-name">ÎùºÏùºÎùΩ</span>
                                    </label>
                                </div>
                                <!-- ÎùºÎ≤§Îçî -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_lavender" name="aroma_notes" value="lavender">
                                    <label for="aroma_lavender">
                                        <span class="aroma-icon">üå∏</span>
                                        <span class="aroma-name">ÎùºÎ≤§Îçî</span>
                                    </label>
                                </div>
                                <!-- Îç∞Ïù¥ÏßÄ -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_daisy" name="aroma_notes" value="daisy">
                                    <label for="aroma_daisy">
                                        <span class="aroma-icon">üå∏</span>
                                        <span class="aroma-name">Îç∞Ïù¥ÏßÄ</span>
                                    </label>
                                </div>
                                <!-- Ï†úÎπÑÍΩÉ -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_poppy" name="aroma_notes" value="poppy">
                                    <label for="aroma_poppy">
                                        <span class="aroma-icon">üå∏</span>
                                        <span class="aroma-name">Ï†úÎπÑÍΩÉ</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- ÎÇòÎ¨¥Ìñ• -->
                        <div class="aroma-category">
                            <h3>üå≥ ÎÇòÎ¨¥Ìñ•</h3>
                            <div class="aroma-grid">
                                <div class="aroma-item" data-category="wood">
                                    <input type="checkbox" id="aroma_oak" name="aroma_notes" value="oak">
                                    <label for="aroma_oak">
                                        <span class="aroma-icon">üå≥</span>
                                        <span class="aroma-name">Ïò§ÌÅ¨</span>
                                    </label>
                                </div>
                                <!-- ÏÉåÎã¨Ïö∞Îìú -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_sandalwood" name="aroma_notes" value="sandalwood">
                                    <label for="aroma_sandalwood">
                                        <span class="aroma-icon">üå≥</span>
                                        <span class="aroma-name">ÏÉåÎã¨Ïö∞Îìú</span>
                                    </label>
                                </div>
                                <!-- Ïú†ÏπºÎ¶ΩÌà¨Ïä§ -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_eucalyptus" name="aroma_notes" value="eucalyptus">
                                    <label for="aroma_eucalyptus">
                                        <span class="aroma-icon">üå≥</span>
                                        <span class="aroma-name">Ïú†ÏπºÎ¶ΩÌà¨Ïä§</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Í≤¨Í≥ºÎ•ò -->
                        <div class="aroma-category">
                            <h3>ü•ú Í≤¨Í≥ºÎ•ò</h3>
                            <div class="aroma-grid">
                                <div class="aroma-item" data-category="nuts">
                                    <input type="checkbox" id="aroma_almond" name="aroma_notes" value="almond">
                                    <label for="aroma_almond">
                                        <span class="aroma-icon">ü•ú</span>
                                        <span class="aroma-name">ÏïÑÎ™¨Îìú</span>
                                    </label>
                                </div>
                                <!-- ÎïÖÏΩ© -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_peanut" name="aroma_notes" value="peanut">
                                    <label for="aroma_peanut">
                                        <span class="aroma-icon">ü•ú</span>
                                        <span class="aroma-name">ÎïÖÏΩ©</span>
                                    </label>
                                </div>
                                <!-- Ìò∏Îëê -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_walnut" name="aroma_notes" value="walnut">
                                    <label for="aroma_walnut">
                                        <span class="aroma-icon">ü•ú</span>
                                        <span class="aroma-name">Ìò∏Îëê</span>
                                    </label>
                                </div>
                                <!-- Ìó§Ïù¥Ï¶êÎÑõ -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_hazelnut" name="aroma_notes" value="hazelnut">
                                    <label for="aroma_hazelnut">
                                        <span class="aroma-icon">ü•ú</span>
                                        <span class="aroma-name">Ìó§Ïù¥Ï¶êÎÑõ</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Í∏∞ÌÉÄ -->
                        <div class="aroma-category">
                            <h3>üåø Í∏∞ÌÉÄ</h3>
                            <div class="aroma-grid">
                                <!-- Í∞ÄÏ£Ω -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_leather" name="aroma_notes" value="leather">
                                    <label for="aroma_leather">
                                        <span class="aroma-icon">üåø</span>
                                        <span class="aroma-name">Í∞ÄÏ£Ω</span>
                                    </label>
                                </div>

                                <!-- Îã¥Î∞∞ -->
                                <div class="aroma-item">
                                    <input type="checkbox" id="aroma_cigarette" name="aroma_notes" value="cigarette">
                                    <label for="aroma_cigarette">
                                        <span class="aroma-icon">üåø</span>
                                        <span class="aroma-name">Îã¥Î∞∞</span>
                                    </label>
                                </div>

                                <!-- ÌùôÎÉÑÏÉà  -->
                                <div class="aroma-item" data-category="other">
                                    <input type="checkbox" id="aroma_other" name="aroma_notes" value="other">
                                    <label for="aroma_other">
                                        <span class="aroma-icon">üåø</span>
                                        <span class="aroma-name">ÌùôÎÉÑÏÉà</span>
                                    </label>
                                </div>

                                <!-- Î≤ÑÌÑ∞ -->
                                <div class="aroma-item" data-category="other">
                                    <input type="checkbox" id="aroma_butter" name="aroma_notes" value="butter">
                                    <label for="aroma_butter">
                                        <span class="aroma-icon">üåø</span>
                                        <span class="aroma-name">Î≤ÑÌÑ∞</span>
                                    </label>
                                </div>

                                <!-- Í∏∞ÌÉÄ -->
                                <div class="aroma-item" data-category="other">
                                    <input type="checkbox" id="aroma_other" name="aroma_notes" value="other">
                                    <label for="aroma_other">
                                        <span class="aroma-icon">üåø</span>
                                        <span class="aroma-name">Í∏∞ÌÉÄ</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- ÏÑ†ÌÉùÎêú ÏïÑÎ°úÎßà ÎÖ∏Ìä∏ ÌëúÏãú -->
                    <div class="selected-notes">
                        <h4>ÏÑ†ÌÉùÎêú ÏïÑÎ°úÎßà ÎÖ∏Ìä∏</h4>
                        <div id="selected-aroma-tags" class="aroma-tags"></div>
                        <input type="hidden" name="aroma_notes_final" id="aroma_notes_final">
                    </div>

                    <!-- ÏïÑÎ°úÎßà ÏÑπÏÖò ÎÇ¥ Ï∂îÍ∞Ä ÎÖ∏Ìä∏ Î∂ÄÎ∂Ñ -->
                    <div class="additional-notes">
                        <h4>Ï∂îÍ∞Ä ÏïÑÎ°úÎßà ÎÖ∏Ìä∏</h4>
                        <div class="custom-aroma-input">
                            <input type="text" 
                                id="custom_aroma_input" 
                                placeholder="Ï∂îÍ∞Ä ÏïÑÎ°úÎßà ÎÖ∏Ìä∏Î•º ÏûÖÎ†•ÌïòÍ≥† EnterÎ•º ÎàåÎü¨Ï£ºÏÑ∏Ïöî"
                                class="custom-input">
                            <div id="custom-aroma-tags" class="custom-tags"></div>
                            <input type="hidden" name="custom_aroma_notes" id="custom_aroma_notes">
                        </div>
                    </div>
                </section>
            </div>
    
            <!-- Ïä§ÌÖù 4: Îßõ -->
            <div class="step-content" id="step4">
                <section class="form-section taste-section">
                    <h2>Îßõ ÌèâÍ∞Ä</h2>
                    <!-- Îßõ ÌèâÍ∞Ä Ïä¨ÎùºÏù¥Îçî -->
                    <div class="taste-evaluation">
                        <!-- ÎãπÎèÑ Ïä¨ÎùºÏù¥Îçî -->
                        <div class="taste-slider-row">
                            <div class="taste-label">ÎãπÎèÑ</div>
                            <div class="taste-slider-container">
                                <span class="taste-min">Dry</span>
                                <div class="taste-slider-wrapper">
                                    <div id="sweetness-slider" class="taste-slider"></div>
                                    <div class="taste-value"><span id="sweetness-value">2</span>/5</div>
                                </div>
                                <span class="taste-max">Sweet</span>
                            </div>
                        </div>

                        <!-- ÏÇ∞ÎèÑ Ïä¨ÎùºÏù¥Îçî -->
                        <div class="taste-slider-row">
                            <div class="taste-label">ÏÇ∞ÎèÑ</div>
                            <div class="taste-slider-container">
                                <span class="taste-min">Low</span>
                                <div class="taste-slider-wrapper">
                                    <div id="acidity-slider" class="taste-slider"></div>
                                    <div class="taste-value"><span id="acidity-value">4</span>/5</div>
                                </div>
                                <span class="taste-max">High</span>
                            </div>
                        </div>

                        <!-- Î∞îÎîîÍ∞ê Ïä¨ÎùºÏù¥Îçî -->
                        <div class="taste-slider-row">
                            <div class="taste-label">Î∞îÎîîÍ∞ê</div>
                            <div class="taste-slider-container">
                                <span class="taste-min">Light</span>
                                <div class="taste-slider-wrapper">
                                    <div id="body-slider" class="taste-slider"></div>
                                    <div class="taste-value"><span id="body-value">5</span>/5</div>
                                </div>
                                <span class="taste-max">Full</span>
                            </div>
                        </div>

                        <!-- ÌÉÄÎãå Ïä¨ÎùºÏù¥Îçî -->
                        <div class="taste-slider-row">
                            <div class="taste-label">ÌÉÄÎãå</div>
                            <div class="taste-slider-container">
                                <span class="taste-min">Smooth</span>
                                <div class="taste-slider-wrapper">
                                    <div id="tannin-slider" class="taste-slider"></div>
                                    <div class="taste-value"><span id="tannin-value">4</span>/5</div>
                                </div>
                                <span class="taste-max">Firm</span>
                            </div>
                        </div>
                    </div>
                    <!-- Îßõ Ï∂îÍ∞Ä ÎÖ∏Ìä∏ -->
                    <div class="taste-notes">
                        <h4>Îßõ Ï∂îÍ∞Ä ÎÖ∏Ìä∏</h4>
                        <div class="taste-notes-input">
                            <input type="text" 
                                id="taste_note_input" 
                                placeholder="Îßõ ÎÖ∏Ìä∏Î•º ÏûÖÎ†•ÌïòÍ≥† EnterÎ•º ÎàåÎü¨Ï£ºÏÑ∏Ïöî"
                                class="custom-input">
                            <div id="taste-note-tags" class="taste-tags"></div>
                            <input type="hidden" name="taste_notes" id="taste_notes_hidden">
                        </div>
                    </div>
                </section>
            </div>
    
            <!-- Ïä§ÌÖù 5: Ï¢ÖÌï©ÌèâÍ∞Ä -->
            <div class="step-content" id="step5">
                <section class="form-section">
                    <h2>Ï¢ÖÌï© ÌèâÍ∞Ä</h2>
                    <!-- Î≥ÑÏ†ê ÌèâÍ∞Ä -->
                    <div class="rating-container">
                        <div class="star-rating">
                            <input type="radio" id="star5" name="rating" value="5">
                            <label for="star5">‚òÖ</label>
                            <input type="radio" id="star4" name="rating" value="4" checked>
                            <label for="star4">‚òÖ</label>
                            <input type="radio" id="star3" name="rating" value="3">
                            <label for="star3">‚òÖ</label>
                            <input type="radio" id="star2" name="rating" value="2">
                            <label for="star2">‚òÖ</label>
                            <input type="radio" id="star1" name="rating" value="1">
                            <label for="star1">‚òÖ</label>
                        </div>
                        <div class="rating-value"><span id="rating-display">4.0</span>/5.0</div>
                    </div>

                    <!-- ÏãúÏùå ÎÖ∏Ìä∏ -->
                    <div class="tasting-notes">
                        <label for="tasting_note">ÏãúÏùå ÎÖ∏Ìä∏</label>
                        <textarea id="tasting_note" name="tasting_note" 
                                placeholder="ÏôÄÏù∏Ïóê ÎåÄÌïú Ï†ÑÎ∞òÏ†ÅÏù∏ Ïù∏ÏÉÅÍ≥º ÌäπÏßïÏùÑ Í∏∞Î°ùÌïòÏÑ∏Ïöî..."
                                rows="4"></textarea>
                    </div>

                    <!-- ÏùåÏãù ÌéòÏñ¥ÎßÅ Ï∂îÏ≤ú -->
                    <div class="food-pairing">
                        <h4>ÏùåÏãù ÌéòÏñ¥ÎßÅ Ï∂îÏ≤ú</h4>
                        <div class="food-tags-container">
                            <div class="preset-tags">
                                <button type="button" class="food-tag" data-value="Ïä§ÌÖåÏù¥ÌÅ¨">Ïä§ÌÖåÏù¥ÌÅ¨</button>
                                <button type="button" class="food-tag" data-value="ÏπòÏ¶à">ÏπòÏ¶à</button>
                                <button type="button" class="food-tag" data-value="ÌååÏä§ÌÉÄ">ÌååÏä§ÌÉÄ</button>
                                <button type="button" class="food-tag" data-value="Ìï¥ÏÇ∞Î¨º">Ìï¥ÏÇ∞Î¨º</button>
                                <button type="button" class="food-tag" data-value="ÏÉêÎü¨Îìú">ÏÉêÎü¨Îìú</button>
                                <button type="button" class="food-tag" data-value="ÎîîÏ†ÄÌä∏">ÎîîÏ†ÄÌä∏</button>
                                <button type="button" class="food-tag" data-value="ÏπòÌÇ®">ÏπòÌÇ®</button>
                                <button type="button" class="food-tag" data-value="Î∞îÎπÑÌÅê">Î∞îÎπÑÌÅê</button>
                            </div>
                            <div class="custom-food-input">
                                <input type="text" id="food_pairing_input" 
                                    placeholder="ÏßÅÏ†ë ÏûÖÎ†• (EnterÎ°ú Ï∂îÍ∞Ä)">
                            </div>
                            <div id="selected-food-tags" class="selected-tags"></div>
                            <input type="hidden" name="food_pairings" id="food_pairings_hidden">
                        </div>
                    </div>

                    <!-- Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú -->
                    <div class="image-upload">
                        <h4>Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú</h4>
                        <div class="image-upload-container">
                            <label for="image_upload" class="upload-button">
                                <i class="fas fa-plus"></i>
                                Ïù¥ÎØ∏ÏßÄ Ï∂îÍ∞Ä
                            </label>
                            <input type="file" id="image_upload" multiple accept="image/*" style="display: none;">
                            <div id="image-preview-container" class="image-previews"></div>
                            <input type="hidden" name="uploaded_images" id="uploaded_images_hidden">
                        </div>
                    </div>
        
                    <div class="form-group">
                        <h4 class="overall">Ï¢ÖÌï© ÌèâÍ∞Ä</h4>
                        <!-- <label for="overall">Ï¢ÖÌï© ÌèâÍ∞Ä</label> -->
                        <textarea id="overall" name="overall" rows="4"></textarea>
                    </div>
        
                    <div class="form-group">
                        <label for="is_public">Í≥µÍ∞ú Ïó¨Î∂Ä</label>
                        <input type="checkbox" id="is_public" name="is_public">
                    </div>
                </section>
            </div>
    
            <div class="form-navigation">
                <div class="nav-buttons">
                    <button type="button" class="btn-prev" style="display: none;">
                        <i class="fas fa-arrow-left"></i> Ïù¥Ï†Ñ
                    </button>
                    <button type="button" class="btn-next">
                        Îã§Ïùå <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
                <form method="post" action="{% url 'notes:note_create' %}" id="noteForm">
                    {% csrf_token %}
                    {{ form.as_p }}
                </form>
                <button type="submit" class="btn-save">
                    <i class="fas fa-save"></i> Ï†ÄÏû•
                </button>
            </div>
        </form>
    </div>
    
</div>



{% endblock %}